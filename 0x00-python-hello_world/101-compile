#!/bin/bash

if [[ -z "$PYFILE" ]]; then
  echo "Error: PYFILE environment variable is not set"
  exit 1
fi

if [[ ! -f "$PYFILE" ]]; then
  echo "Error: $PYFILE does not exist"
  exit 1
fi

python3 -m py_compile "$PYFILE"

if [[ $? -ne 0 ]]; then
  echo "Error: Failed to compile $PYFILE"
  exit 1
fi

PYCFILE="${PYFILE}c"
echo "Compiled $PYFILE to $PYCFILE"

